<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- SEO Meta Tags -->
    <title>PITA診断 | あなたは何主義者として生きるのか。</title>
    <meta name="description" content="100の質問があなたの魂の形を決定づける。深層に潜む『イズム』を解剖する精密診断システム。">
    <meta name="keywords" content="性格診断, 心理テスト, 自己分析, 主義者, 大学生, PITA">
    <link rel="canonical" href="https://pita-diagnosis.com/">

    <!-- OGP -->
    <meta property="og:title" content="PITA診断 | あなたは何主義者として生きるのか">
    <meta property="og:description" content="100の質問であなたの深層心理を解剖。魂の形を特定せよ。">
    <meta property="og:image" content="https://pita-diagnosis.com/ogp-image.png">
    <meta property="og:url" content="https://pita-diagnosis.com/">
    <meta property="og:type" content="website">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@700&family=Noto+Sans+JP:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #111111; --accent: #3b82f6; --bg-gray: #f3f4f6; }
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #ffffff; color: var(--primary); -webkit-font-smoothing: antialiased; overflow-x: hidden; }
        .serif { font-family: 'Noto Serif JP', serif; }
        
        /* インタラクティブ要素 */
        .btn-choice { transition: all 0.2s ease-out; border: 1px solid #eeeeee; background: #ffffff; cursor: pointer; }
        .btn-choice:active { transform: scale(0.98); background: #f9f9f9; }
        
        .progress-bar { transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .img-slot { aspect-ratio: 1/1; width: 100%; max-width: 340px; margin: 0 auto; border-radius: 50%; background-color: var(--bg-gray); overflow: hidden; display: flex; align-items: center; justify-content: center; position: relative; border: 1px solid #eee; }
        .img-slot img { width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 0.6s ease-in-out; }
        .img-loaded img { opacity: 1; }

        /* ティッカー（描画負荷軽減版） */
        .ticker-container { width: 100%; overflow: hidden; white-space: nowrap; background: #fafafa; padding: 15px 0; border-top: 1px solid #eee; border-bottom: 1px solid #eee; }
        .ticker-content { display: inline-block; animation: ticker 90s linear infinite; will-change: transform; }
        @keyframes ticker { from { transform: translate3d(0,0,0); } to { transform: translate3d(-50%,0,0); } }
        .ticker-item { display: inline-block; margin: 0 25px; font-weight: 700; color: #888; font-size: 0.9rem; }

        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.6s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        #dev-menu { position: fixed; bottom: 20px; right: 20px; z-index: 9999; background: #111; color: #fff; padding: 15px; border-radius: 15px; font-size: 10px; opacity: 0.9; }
        #dev-menu button { background: #333; margin: 2px; padding: 5px 10px; border-radius: 5px; }

        .ad-space { background: #f9fafb; border: 1px dashed #d1d5db; padding: 20px; text-align: center; border-radius: 1rem; margin-top: 40px; font-size: 10px; color: #9ca3af; }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-white">

    <nav class="p-4 md:p-8 flex justify-between items-center border-b border-gray-50 bg-white/80 backdrop-blur-md sticky top-0 z-50">
        <div class="flex flex-col cursor-pointer select-none" onclick="devClick()">
            <div class="text-2xl md:text-3xl font-black tracking-tighter serif text-gray-900 leading-none">PITA</div>
            <div class="text-[7px] md:text-[8px] font-bold text-gray-400 tracking-[0.15em] uppercase mt-1">Personality Ism Type Analyzer</div>
        </div>
        <div class="text-[9px] font-bold text-blue-600 tracking-widest uppercase italic border-l pl-4 border-gray-100">v4.8.1</div>
    </nav>

    <div id="dev-menu" class="hidden text-center">
        <p class="mb-2 font-bold text-blue-400">DEBUG</p>
        <div class="grid grid-cols-2 gap-1">
            <button onclick="jumpToResult('ALT')">利他</button><button onclick="jumpToResult('EGO')">利己</button>
            <button onclick="jumpToResult('OPT')">楽観</button><button onclick="jumpToResult('NIH')">虚無</button>
            <button onclick="jumpToResult('IDE')">理想</button><button onclick="jumpToResult('REA')">現実</button>
            <button onclick="jumpToResult('MOD')">秩序</button><button onclick="jumpToResult('ANA')">混沌</button>
        </div>
        <button class="mt-2 w-full text-red-400 font-bold" onclick="this.parentElement.classList.add('hidden')">CLOSE</button>
    </div>

    <main class="flex-grow flex items-center justify-center p-4 md:p-6 bg-[#fcfcfc]">
        
        <!-- Intro -->
        <div id="intro" class="max-w-2xl w-full text-center fade-in py-8">
            <div class="mb-4 inline-block px-4 py-1 rounded-full border border-gray-100 text-[9px] font-black tracking-widest text-gray-400 uppercase">Analysis Engine</div>
            <h2 class="text-3xl md:text-6xl font-bold mb-8 serif leading-tight text-gray-900">あなたは何主義者として<br><span class="text-blue-600">生きるのか。</span></h2>
            <p class="text-gray-500 mb-10 leading-relaxed text-xs md:text-sm tracking-widest max-w-lg mx-auto px-4">100の分岐点。その無意識の選択の重みが、あなたの主義を定義する。</p>
            
            <button onclick="startDiagnosis()" class="w-full md:w-auto bg-gray-900 text-white px-12 py-5 rounded-full font-bold text-lg hover:bg-blue-700 transition shadow-2xl mb-8">診断を開始する</button>

            <div class="mb-12">
                <a href="https://forms.gle/1qTTixArEFQwjuqK9" target="_blank" class="text-[10px] font-bold text-gray-400 hover:text-blue-500 transition-colors uppercase tracking-widest border-b border-gray-100 pb-1">ご意見・ご要望はこちら</a>
            </div>
        </div>

        <!-- Quiz -->
        <div id="quiz" class="max-w-2xl w-full hidden py-4 md:py-16">
            <div class="mb-10 md:mb-16 px-2">
                <div class="w-full bg-gray-100 h-[2px] mb-6"><div id="progress" class="progress-bar bg-blue-600 h-full" style="width: 1%"></div></div>
                <div class="flex justify-between items-end">
                    <div class="flex flex-col text-left"><span id="q-hint" class="text-[10px] font-bold text-blue-500 italic mb-1 h-4 select-none">...</span><span id="q-count" class="text-[9px] font-black text-gray-400 tracking-widest uppercase">Question 01</span></div>
                    <div id="q-percent" class="text-3xl md:text-4xl font-light text-blue-600 serif">1%</div>
                </div>
            </div>
            <div class="min-h-[160px] md:min-h-[200px] flex items-center justify-center mb-12 px-2 text-center">
                <h3 id="question-text" class="text-xl md:text-3xl font-bold leading-relaxed serif text-gray-800"></h3>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-lg mx-auto px-4 mb-8">
                <button onclick="answer(true)" class="btn-choice py-6 md:py-8 px-6 rounded-2xl font-bold text-gray-800 text-lg md:text-xl shadow-sm">はい</button>
                <button onclick="answer(false)" class="btn-choice py-6 md:py-8 px-6 rounded-2xl font-bold text-gray-800 text-lg md:text-xl shadow-sm">いいえ</button>
            </div>
            <button id="btn-back" onclick="goBack()" class="btn-back text-[10px] font-bold uppercase tracking-widest hidden w-full">← ひとつ前の質問に戻る</button>
        </div>

        <!-- Result -->
        <div id="result" class="max-w-4xl w-full hidden fade-in py-12 text-center">
            <p class="text-[9px] font-black text-blue-600 uppercase tracking-[0.6em] mb-4">Diagnostics Archive</p>
            <h2 id="result-title" class="text-4xl md:text-7xl font-bold mb-1 serif tracking-tighter text-gray-900"></h2>
            <p id="result-en" class="text-[12px] font-black text-gray-300 uppercase tracking-[0.4em] mb-6 italic"></p>
            <p id="result-catch" class="text-lg md:text-2xl text-gray-400 font-medium italic serif mb-10"></p>
            
            <div id="result-art-container" class="img-slot shadow-2xl bg-white mb-12 border-none scale-100 md:scale-110"></div>

            <div class="inline-flex flex-col items-center bg-white px-8 py-6 rounded-[2rem] border border-gray-100 shadow-sm relative mx-auto mb-16">
                <div class="text-[8px] md:text-[9px] text-gray-400 uppercase font-black mb-1 tracking-[0.4em]">Deep PITA Index</div>
                <div class="flex items-baseline gap-2 justify-center">
                    <div id="stat-1" class="text-4xl md:text-6xl font-black italic tracking-tighter text-blue-900"></div>
                    <div class="text-[10px] font-bold text-gray-300">/ 200.0</div>
                </div>
                <button onclick="toggleScoreInfo()" class="mt-4 text-[9px] font-bold text-blue-500 border-b border-blue-200">What is this score?</button>
                <div id="score-info" class="hidden absolute top-full mt-4 left-1/2 -translate-x-1/2 w-64 bg-gray-900 text-white p-6 rounded-2xl text-[10px] leading-loose z-50 text-left shadow-2xl">
                    <button onclick="toggleScoreInfo()" class="absolute top-2 right-4 text-gray-400 text-base">×</button>
                    <p class="mb-2 font-bold text-blue-400 italic text-[12px]">PITA Index とは？</p>
                    特定の主義への「純度」を示す指標。理論上の最大値は200.0。高いほど歴史的偉人級の尖った価値観を宿しています。
                </div>
            </div>

            <div class="space-y-24">
                <section class="max-w-2xl mx-auto px-6"><h4 class="text-[9px] font-bold text-gray-300 mb-10 uppercase tracking-[0.5em] italic">Spectrum Balance</h4><div id="axis-details" class="space-y-8"></div></section>
                <section class="border-t border-gray-100 pt-20 overflow-hidden"><h4 class="text-[9px] font-bold text-gray-400 mb-8 uppercase tracking-[0.5em] italic">Parallel Souls</h4><div class="ticker-container"><div id="ticker-content" class="ticker-content"></div></div></section>
                <section class="border-t border-gray-100 pt-16 overflow-hidden"><h4 class="text-[9px] font-bold text-blue-400 mb-8 uppercase tracking-[0.5em] italic">Modern Icons</h4><div class="ticker-container"><div id="ticker-char-content" class="ticker-content"></div></div></section>
                <section class="bg-white p-8 md:p-24 rounded-[3rem] mx-4 shadow-sm border border-gray-50 text-left"><h4 class="text-[9px] font-bold text-gray-300 mb-10 uppercase tracking-[0.5em] text-center">Identity Report</h4><div id="result-desc" class="leading-relaxed md:leading-[2.6] text-base md:text-xl space-y-8 serif text-gray-700"></div></section>
                <section class="bg-blue-600 text-white p-8 md:p-24 rounded-[3rem] shadow-2xl relative overflow-hidden mx-4 text-left"><h4 class="text-[9px] font-bold text-blue-200 mb-10 uppercase tracking-[0.6em] text-center relative z-10">Future Guidance</h4><div id="result-direction" class="text-blue-50 leading-relaxed md:leading-[2.4] text-base md:text-xl relative z-10 text-center mx-auto max-w-lg"></div></section>

                <div class="flex flex-col gap-4 pt-12 pb-24 px-6 mx-auto max-w-xs">
                    <button onclick="shareOnX()" class="bg-[#1DA1F2] text-white py-4 px-8 rounded-full font-bold shadow-lg">結果をXでシェア</button>
                    <a href="https://forms.gle/1qTTixArEFQwjuqK9" target="_blank" class="btn-secondary text-gray-700 py-4 px-8 rounded-full font-bold text-center">フィードバックを送る</a>
                    <button onclick="location.reload()" class="bg-gray-900 text-white py-4 px-8 rounded-full font-bold shadow-md">もう一度診断する</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="p-16 text-center border-t border-gray-50 bg-white">
        <div class="flex justify-center gap-8 mb-8 text-[10px] font-bold text-gray-400 uppercase tracking-[0.2em]">
            <a href="privacy.html" class="hover:text-blue-500">Privacy Policy</a>
            <a href="https://forms.gle/d6nJr3NhzWkyTiQFA" target="_blank" class="hover:text-blue-500">Contact</a>
        </div>
        <div class="text-[9px] text-gray-300 uppercase tracking-[0.4em] font-bold italic">PITA / Personality Ism Type Analyzer</div>
        <div class="text-[7px] text-gray-200 mt-4 tracking-tighter">&copy; 2026 pita-diagnosis.com</div>
    </footer>

    <script>
        const resultData = {
            ALT: { en: "Altruist", n: "利他主義者", c: "「時代を救済する慈愛の聖者」", img: "PITA ALT.png", celebs: ["マザー・テレサ", "ガンジー", "シュバイツァー", "ナイチンゲール", "キング牧師", "オードリー・ヘップバーン"], chars: ["竈門炭治郎", "緑谷出久", "ベル・クラネル", "夏目貴志", "乙骨憂太", "藤丸立香", "アルフォンス", "潮田渚", "本田透", "鹿目まどか", "エミリア", "レム", "ジョナサン", "ミリオ"], d: "あなたは存在そのものが光です。他者の幸福を自らの喜びとし、自己犠牲すら厭わない精神性は、現代社会における唯一の良心と言えるでしょう。周囲からは時として『お節介』と言われるかもしれませんが、それはあなたの魂の器が大きすぎるための誤解に過ぎません。", dir: "まずは自分を愛することから始めてください。他者のために使い果たしたエネルギーを、たまには自分のために浪費する贅沢を覚えることで、慈愛はより深まります。" },
            EGO: { en: "Egoist", n: "利己主義者", c: "「自己を統治する気高き孤高の王」", img: "PITA EGO.png", celebs: ["ナポレオン", "スティーブ・ジョブズ", "織田信長", "カエサル", "アレクサンダー大王", "ハワード・ヒューズ"], chars: ["ギルガメッシュ", "海馬瀬人", "ルルーシュ", "夜神月", "ベジータ", "フリーザ", "爆豪勝己", "志々雄真実", "クロロ", "エレン", "ドフラミンゴ", "藍染惣右介", "DIO", "赤司征十郎", "跡部景吾", "殺生丸", "飛影", "五条悟", "両面宿儺"], d: "あなたは圧倒的な自己の確立者です。群れに媚びず、自らの欲望と目的に忠実であるその姿勢は、真の意味での『自由』を体現しています。王座は常に、一人のために用意されているのです。", dir: "その揺るぎない自己愛を、世界を動かすエンジンにしてください。あなたが自分を極限まで大切にすることは、周囲に強烈なインスピレーションを与えます。" },
            OPT: { en: "Optimist", n: "楽観主義者", c: "「世界に光を灯す不滅の希望」", img: "PITA OPT.png", celebs: ["ウォルト・ディズニー", "エジソン", "坂本九", "アンネ・フランク", "ヘレン・ケラー", "チャーリー・チャップリン"], chars: ["ルフィ", "孫悟空", "うずまきナルト", "サトシ", "ゴン", "月野うさぎ", "両津勘吉", "アーニャ", "星野アイ", "虎杖悠仁", "野原しんのすけ", "佐藤和真", "アクア", "ナツ", "アスタ", "江戸川コナン", "ドラえもん", "星馬烈", "日向翔陽", "ラインハルト(リゼロ)", "湊あくあ"], d: "あなたは絶望を塗り替える天才です。どんな暗闇の中でも未来の輝きを見出し、周囲を明るく照らすそのエネルギーは、人類が前進し続けるための最も純粋な動力源です。", dir: "根拠のない自信を、そのまま根拠にしてください。論理や確率が『不可能だ』と告げた時、あなたの『きっと大丈夫』という一言が物理法則を凌駕します。" },
            NIH: { en: "Nihilist", n: "虚無主義者", c: "「真理を悟りし超越の静観者」", img: "PITA NIH.png", celebs: ["ニーチェ", "太宰治", "カフカ", "ショーペンハウアー", "カミュ", "三島由紀夫"], chars: ["ウルキオラ", "L", "綾波レイ", "槙島聖護", "夏油傑", "金木研", "碇シンジ", "渚カヲル", "伏黒甚爾", "ディアボロ", "鬼舞辻無惨", "ガッツ", "暁美ほむら", "メルエム", "サイタマ", "阿良々木暦", "不死川実弥", "童磨", "ジン(コナン)", "貝木泥舟", "キルア"], d: "あなたは世界の『無』を見抜いた賢者です。虚飾に満ちた社会の価値観から脱却し、何物にも執着しないその静かなる視点は、あらゆる苦悩を超越した究極の自由を象徴しています。", dir: "『意味がない』からこそ、何をやっても自由なのだという悟りを楽しんでください。冷めた瞳で、この喜劇のような世界を優雅に鑑賞し続けましょう。" },
            IDE: { en: "Idealist", n: "理想主義者", c: "「至高なる未来を紡ぐ美の建築家」", img: "PITA IDE.png", celebs: ["ジョン・レノン", "宮沢賢治", "サン=テグジュペリ", "ファン・ゴッホ", "オスカー・ワイルド", "プラトン"], chars: ["衛宮士郎", "アルトリア", "ジャンヌ", "ハンジ", "ロイ・マスタング", "及川徹", "宮園かをり", "千反田える", "エルヴィン", "グリフィス", "シャル・ド・ゴール", "アーサー", "本田菊", "雲雀恭弥", "六道骸", "鳳凰院凶真", "枢木スザク", "エドワード", "ニコ・ロビン", "中島敦", "太宰治"], d: "あなたは現実というキャンバスに理想を描く芸術家です。目に見える事実よりも、心にある『あるべき姿』を信じる情熱は、人類を更なる高みへと押し上げる崇高な意志です。", dir: "あなたの脳内にある完璧な世界を、一歩ずつ現実へ翻訳してください。現実とのギャップに苦しむのは、あなたが正しい証拠です。" },
            REA: { en: "Realist", n: "現実主義者", c: "「混沌を切り裂く真実の体現者」", img: "PITA REA.png", celebs: ["福沢諭吉", "徳川家康", "フランクリン", "チャーチル", "鄧小平", "リー・クアンユー", "ロックフェラー"], chars: ["奈良シカマル", "比企谷八幡", "リヴァイ", "サンジ", "トラファルガー・ロー", "狡噛慎也", "加藤恵", "雪ノ下雪乃", "堀北鈴音", "龍園翔", "坂柳有栖", "加持リョウジ", "葛城ミサト", "赤木リツコ", "岩泉一", "角名倫太郎", "佐久早聖臣", "昼神幸郎", "岸辺", "天沢一夏", "灰崎祥吾", "吉良吉影", "高坂麗奈"], d: "あなたは揺るぎない地平に立つ実力者です。曖昧な幻想を排除し、事実と論理で世界を読み解く知性は、現代を生き抜く最も強力な武器です。", dir: "数字と事実の背後にある『人間の感情』という変数も計算に入れてください。そのノイズさえも管理下に置くことで、あなたの支配力は揺るぎないものになります。" },
            MOD: { en: "Modernist", n: "秩序主義者", c: "「調和を維持する世界の守護者」", img: "PITA MOD.png", celebs: ["カント", "リンカーン", "ワシントン", "孔子", "ドラッカー", "ミル", "ハミルトン"], chars: ["飯田天哉", "国木田独歩", "手塚国光", "真田弦一郎", "影山飛雄", "常守朱", "宜野座伸元", "銭形警部", "目暮十三", "佐藤美和子", "高木渉", "安室透", "赤井秀一", "ターニャ", "ラインハルト(銀英伝)", "ヤン", "オーベルシュタイン", "三雲修", "七海建人", "朽木白哉", "山口忠", "縁下力", "近藤勲", "土方十四郎", "夜久衛輔", "白鳥任三郎", "鏑木・T・虎徹"], d: "あなたは文明の根幹を支える守護神です。規律を重んじ、美しい秩序を構築・維持する誠実さは、社会が崩壊することなく存続するための要石です。", dir: "ルールを守るだけでなく、ルールを創る側に立ってください。あなたの高い規律性と公平さは、他者を導くためにあります。" },
            ANA: { en: "Anarchist", n: "混沌主義者", c: "「無限の可能性を解き放つ自由の解放者」", img: "PITA ANA.png", celebs: ["坂本龍馬", "ピカソ", "チェ・ゲバラ", "バクーニン", "マルコムX", "ディオゲネス", "シド・ヴィシャス"], chars: ["ヒソカ", "ジョーカー", "坂田銀時", "デンジ", "パワー", "我妻由乃", "雨流みねね", "ルフィ", "キッド", "空条承太郎", "空条徐倫", "仗助", "ジャイロ", "リゾット", "プロシュート", "レヴィ", "纏流子", "エスデス", "アーサー(炎炎)", "範馬刃牙", "折原臨也", "セルティ", "東堂葵", "トガヒミコ", "死柄木弔", "バギー", "ジェビル", "神威"], d: "あなたはあらゆる鎖を断ち切る変革者です。既存のルールを破壊し、真っ白な大地に新たな風を吹き込む衝動は、進化のために不可欠な生命的根源力です。", dir: "破壊のあとに何が残るかを考える必要はありません。あなたは、ただひたすらに風であり続けてください。" }
        };

        const hintPool = ["いい選択だ。","深層が揺れている。","迷いも答えだ。","本質に近づいている。","魂に嘘はないか？","解像度が上がる。","その決断が君だ。","加速しよう。","真実まであと少し。","理性か本能か。","君の輪郭が見えた。","深い、もっと深く。","直感を信じろ。","常識を捨てろ。","君の核に触れる。","面白い回答だ。","本当の君は誰だ？","世界のノイズを消せ。","覚悟はいいか。"];

        // State
        let currentIdx=0, scores={ALT:0,EGO:0,OPT:0,NIH:0,IDE:0,REA:0,MOD:0,ANA:0}, history=[], devClickCount=0, finalType='ALT';

        window.onload = () => {
            const urlParams = new URLSearchParams(window.location.search);
            const resParam = urlParams.get('result');
            if(resParam && resultData[resParam]) jumpToResult(resParam);
        };

        function devClick() { devClickCount++; if(devClickCount>=5){document.getElementById('dev-menu').classList.remove('hidden');devClickCount=0;}}
        function startDiagnosis(){ document.getElementById('intro').classList.add('hidden'); document.getElementById('quiz').classList.remove('hidden'); showQuestion(); }

        function showQuestion(){
            const q = questions[currentIdx];
            document.getElementById('question-text').innerText = q.t;
            document.getElementById('q-count').innerText = `Question ${(currentIdx+1).toString().padStart(2,'0')}`;
            document.getElementById('q-hint').innerText = hintPool[Math.floor(Math.random() * hintPool.length)];
            const progress = ((currentIdx+1)/100)*100;
            document.getElementById('progress').style.width = `${progress}%`;
            document.getElementById('q-percent').innerText = `${Math.floor(progress)}%`;
            document.getElementById('btn-back').style.display = currentIdx > 0 ? 'block' : 'none';
        }

        function answer(isYes){
            history.push({ scores: JSON.parse(JSON.stringify(scores)), idx: currentIdx });
            const q = questions[currentIdx];
            const opp = { ALT:'EGO', EGO:'ALT', OPT:'NIH', NIH:'OPT', IDE:'REA', REA:'IDE', MOD:'ANA', ANA:'MOD' }[q.a];
            if(isYes) scores[q.a] += q.w; else scores[opp] += q.w;
            currentIdx++; if(currentIdx < 100) showQuestion(); else finish();
        }

        function goBack(){ if(history.length===0) return; const last=history.pop(); scores=last.scores; currentIdx=last.idx; showQuestion(); }
        function finish(){ document.getElementById('quiz').classList.add('hidden'); document.getElementById('result').classList.remove('hidden'); showResult(); }
        function toggleScoreInfo(){ document.getElementById('score-info').classList.toggle('hidden'); }

        function showResult(){
            let maxVal = -1, totalDev = 0;
            const pairs = [{lk:'ALT',rk:'EGO'},{lk:'OPT',rk:'NIH'},{lk:'IDE',rk:'REA'},{lk:'MOD',rk:'ANA'}];
            pairs.forEach(p => {
                const sum = scores[p.lk] + scores[p.rk], ratio = sum === 0 ? 50 : (scores[p.lk]/sum)*100;
                totalDev += Math.abs(ratio - 50);
                if(scores[p.lk] >= maxVal){ maxVal=scores[p.lk]; finalType=p.lk; }
                if(scores[p.rk] >= maxVal){ maxVal=scores[p.rk]; finalType=p.rk; }
            });
            const data = resultData[finalType];
            document.getElementById('result-title').innerText=data.n;
            document.getElementById('result-en').innerText=data.en;
            document.getElementById('result-catch').innerText=data.c;
            document.getElementById('result-desc').innerHTML=data.d.split('。').filter(s=>s).map(s=>`<p class="mb-6">${s}。</p>`).join('');
            document.getElementById('result-direction').innerHTML=`✦ ${data.dir}`;
            document.getElementById('stat-1').innerText=Math.min((100 + (totalDev * 0.45) + Math.random()*5), 200.0).toFixed(1);
            
            const artSlot = document.getElementById('result-art-container');
            artSlot.classList.remove('img-loaded');
            const imgEl = document.createElement('img');
            imgEl.src = encodeURI(data.img); // 半角スペースを含むファイル名を安全に読み込み
            imgEl.onload = () => artSlot.classList.add('img-loaded');
            imgEl.onerror = () => { artSlot.innerHTML=`<span class="img-placeholder text-[8px]">${finalType} Visualization</span>`; };
            artSlot.innerHTML=''; artSlot.appendChild(imgEl);

            const tC = document.getElementById('ticker-content'); tC.innerHTML='';
            [...data.celebs,...data.celebs].forEach(c=>{ tC.innerHTML+=`<span class="ticker-item">${c}</span>`; });
            const chT = document.getElementById('ticker-char-content'); chT.innerHTML='';
            [...data.chars,...data.chars].forEach(c=>{ chT.innerHTML+=`<span class="ticker-item ticker-char">${c}</span>`; });

            const axisB = document.getElementById('axis-details'); axisB.innerHTML='';
            const labels = [{l:"献身",r:"孤高",lk:'ALT',rk:'EGO'},{l:"渇望",r:"静観",lk:'OPT',rk:'NIH'},{l:"夢幻",r:"実利",lk:'IDE',rk:'REA'},{l:"調和",r:"変革",lk:'MOD',rk:'ANA'}];
            labels.forEach(p => {
                const sum = scores[p.lk] + scores[p.rk], lp = sum===0?50:Math.round((scores[p.lk]/sum)*100), rp = 100-lp;
                axisB.innerHTML += `<div class="space-y-4"><div class="flex justify-between text-[10px] font-black text-gray-400 uppercase tracking-[0.3em] px-1 italic"><span>${p.l}(${p.lk}) ${lp}%</span><span>${rp}% ${p.r}(${p.rk})</span></div><div class="h-1.5 w-full bg-gray-100 rounded-full flex overflow-hidden"><div class="bg-blue-400 h-full progress-bar" style="width:${lp}%"></div><div class="bg-gray-800 h-full progress-bar" style="width:${rp}%"></div></div></div>`;
            });
            window.scrollTo({top:0,behavior:'smooth'});
        }

        function jumpToResult(type){ finalType=type; document.getElementById('intro').classList.add('hidden'); document.getElementById('quiz').classList.add('hidden'); document.getElementById('result').classList.remove('hidden'); scores={ALT:0,EGO:0,OPT:0,NIH:0,IDE:0,REA:0,MOD:0,ANA:0}; scores[type]=75; showResult(); }
        function shareOnX(){ const idx=document.getElementById('stat-1').innerText; const text=encodeURIComponent(`PITA診断結果：私は【${resultData[finalType].n}】でした。PITA Index: ${idx} / 200.0\n${resultData[finalType].c}\n\nあなたは何主義者として生きるのか。深層心理を解剖せよ。\n#PITA診断 #PersonalityIsmTypeAnalyzer\n`); window.open(`https://twitter.com/intent/tweet?text=${text}&url=${encodeURIComponent(window.location.href)}`,'_blank'); }
    </script>
</body>
</html>
